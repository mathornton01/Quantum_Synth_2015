% 
% File: 4-bit_circular_hash_qc.qasm
% Date: March 21 2015
% Authors: Josh Rendon, Micah Thornton
%
%  def not,0,'oplus'
%  def toffoli4,3,'oplus'
% 
%  qubit in4
%  qubit in3
%  qubit in2
%  qubit in1
% 
%  toffoli4      in4,in3,in2,in1
%  toffoli       in4,in3,in2
%  cnot          in4,in3
%  not           in4

%  Time 01:
%    Gate 00 toffoli4(in4,in3,in2,in1)
%  Time 02:
%    Gate 01 toffoli(in4,in3,in2)
%  Time 03:
%    Gate 02 cnot(in4,in3)
%  Time 04:
%    Gate 03 not(in4)

% Qubit circuit matrix:
%
% in4: gAxA, gBxA, gCxA, gDxA, n  
% in3: gAxB, gBxB, gCxB, n  , n  
% in2: gAxC, gBxC, n  , n  , n  
% in1: gAxD, n  , n  , n  , n  

\input{xyqcirc.tex}

% definitions for the circuit elements

\def\gAxA{\b\w\A{gAxA}}
\def\gAxB{\b\w\A{gAxB}}
\def\gAxC{\b\w\A{gAxC}}
\def\gAxD{\op{oplus}\w\A{gAxD}}
\def\gBxA{\b\w\A{gBxA}}
\def\gBxB{\b\w\A{gBxB}}
\def\gBxC{\o\w\A{gBxC}}
\def\gCxA{\b\w\A{gCxA}}
\def\gCxB{\o\w\A{gCxB}}
\def\gDxA{\op{oplus}\w\A{gDxA}}

% definitions for bit labels and initial states

\def\bA{ \q{in_{4}}}
\def\bB{ \q{in_{3}}}
\def\bC{ \q{in_{2}}}
\def\bD{ \q{in_{1}}}

% The quantum circuit as an xymatrix

\xymatrix@R=5pt@C=10pt{
    \bA & \gAxA &\gBxA &\gCxA &\gDxA &\n  
\\  \bB & \gAxB &\gBxB &\gCxB &\n   &\n  
\\  \bC & \gAxC &\gBxC &\n   &\n   &\n  
\\  \bD & \gAxD &\n   &\n   &\n   &\n  
%
% Vertical lines and other post-xymatrix latex
%
\ar@{-}"gAxD";"gAxA"\ar@{-}"gAxD";"gAxB"\ar@{-}"gAxD";"gAxC"
\ar@{-}"gBxC";"gBxA"\ar@{-}"gBxC";"gBxB"
\ar@{-}"gCxB";"gCxA"
}

\end{document}
